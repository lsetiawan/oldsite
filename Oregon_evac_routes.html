<html xmlns="http://www.w3.org/1999/xhtml">
        <head>
                <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
                <title>Google Maps with GeoWebCache</title>
                <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC-yfbMy2ToNCYdtXQg8QhF-HZHcVBYdM8&callback=initMap"
type="text/javascript"></script>
                <script type="text/javascript">
                        function initialize() {
                                var myOptions = {
                                          zoom: 9,
                                          center: new google.maps.LatLng(45.85913220604581, -123.96664192089551),
                                          zoomControl: true,
                                          mapTypeId: google.maps.MapTypeId.TERRAIN
                                        }
                                var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

                                var tsunami = {
                                         getTileUrl: function(coord, zoom) {
                                          var tileRange = 1 << zoom;

                                          // don't repeat across y-axis (vertically)
                                          if (coord.y < 0 || coord.y >= tileRange) {
                                            return null;
                                          };

                                          // repeat across x-axis
                                          if (coord.x < 0 || coord.x >= tileRange) {
                                            x = (coord.x % tileRange + tileRange) % tileRange;
                                            return "http://data.nanoos.org/geoserver/gwc/service/gmaps?layers=tsunamis:oregon_evac_routes&" +
                                                "zoom=" + zoom + "&x=" + x + "&y=" + coord.y + "&format=image/png";
                                          };

                                          return "http://data.nanoos.org/geoserver/gwc/service/gmaps?layers=tsunamis:oregon_evac_routes&" +
                                                "zoom=" + zoom + "&x=" + coord.x + "&y=" + coord.y + "&format=image/png";
                                          },
                                        tileSize: new google.maps.Size(256, 256),
                                        isPng: true,
                                        opacity: 1
                                   };





                           var customMapType = new google.maps.ImageMapType(tsunami);
                           map.overlayMapTypes.insertAt(1, customMapType);

                        }

                        // Normalizes the coords that tiles repeat across the x axis (horizontally)
                        // like the standard Google map tiles.
                </script>
                <style type="text/css">
                    html,body {
                      width:100%;
                      height:100%;
                      margin:0;
                      padding:0;
                    }
                </style>
        </head>
        <body onload="initialize()" onunload="GUnload()">
           <div id="map_canvas" style="width: 100%; height: 100%"></div>
        </body>
</html>
